<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="script.js" defer></script>
    <link rel="stylesheet" href="end.css" />
    <title>End Page</title>
  </head>
  <body>
    <header>
      <h1>Your Christmas Wishlist<br />has been created!</h1>
    </header>
    <section>
      <h2>
        To export your wishlist as a text<br />
        file, simply click the TXT icon<br />
        below
      </h2>

      <!-- Button -->
      <div class="frame">
        <button id="backToFrame1">
          <img src="./Images/home.png" alt="Home icon" />
        </button>
        <button id="downloadWishlist">
          <img src="./Images/txt-file.png" alt="Text file icon" />
        </button>
      </div>
    </section>

    <script>
      // Navigate back to Frontpage frame1
      document
        .getElementById("backToFrame1")
        .addEventListener("click", function () {
          window.location.href = "index.html#frame1";
        });

      // Underneath here is everything that handles the .txt part
      const wishlistData =
        localStorage.getItem("wishlistData") || "Your wishlist is empty.";

      document
        .getElementById("downloadWishlist")
        .addEventListener("click", function () {
          const blob = new Blob([wishlistData], { type: "text/plain" });
          const url = URL.createObjectURL(blob);

          const a = document.createElement("a");
          a.href = url;
          a.download = "wishlist.txt";
          document.body.appendChild(a);
          a.click();

          // Clean up
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        });
    </script>
  </body>
</html>
